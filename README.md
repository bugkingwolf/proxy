# 代理模式


### JDK Proxy 原理:

    1、获取被代理对象的引用，并且获取到它的所有的接口(通过反射获取)。
    2、JDK Proxy类 newInstance方法重新生成一个新的类、同时新的类要实现被代理类所有实现的所有的接口。
    3、动态生成 Java 代码，把新加的业务逻辑方法由一定的逻辑代码去调用（在代码中体现）。
    4、编译新生成的 Java 代码.class。
    5、再重新加载到 JVM 中运行。

### 静态代理和动态代理的区别:

    1.静态代理只能手动完成代理操作，如果被代理类新增方法，代理类需要同步新增，违背了开闭原则  
    2.动态代理采用了运行时动态生成代码，重新生成一个代理类来实现，不需要原先的代理类同步扩展，遵循开闭原则  
  
### Jdk代理和cglib代理区别: 

    1.Jdk代理是实现了被代理类对象的接口，cglib是继承了被代理类对象  
    2.jdk代理和cglib代理都是重新生成了class字节码，jdk代理是直接写class字节码，cglib是使用了ASM框架写字节码，  
      cglib更复杂，效率低一些  
    3.jdk调用代理类是采用反射机制，cglib是使用fastclass机制直接调用，cglib调用效率高一些  
 
